var se=Object.defineProperty,oe=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var q=(t,n,r)=>n in t?se(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,w=(t,n)=>{for(var r in n||(n={}))B.call(n,r)&&q(t,r,n[r]);if(y)for(var r of y(n))T.call(n,r)&&q(t,r,n[r]);return t},S=(t,n)=>oe(t,ae(n));var D=(t,n)=>{var r={};for(var s in t)B.call(t,s)&&n.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&y)for(var s of y(t))n.indexOf(s)<0&&T.call(t,s)&&(r[s]=t[s]);return r};import{c as ie,u as I,a as ce,b as le,f as de,d as F,e as ue,r as g,j as a,F as h,g as e,C as M,V as U,I as $,h as _,B as m,i as he,k as L,l as c,H as me,T as O,m as u,S as P,n as pe,o as ge,L as fe,p as K,q as E,M as ye,s as be,A as ve,t as we,v as H,w as Se,x as G,y as J,z as b,R as ke,D as p,E as Ce,G as xe,J as Re,K as Le,N as Oe,O as k,P as Ie,Q as Me,U as Pe,W as Ee,X as ze,Y as Ae,Z as Ne,_ as qe,$ as Be}from"./vendor.0cfcd219.js";const Te=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};Te();const Q=ie({name:"auth",initialState:{user:null,token:null},reducers:{setCredentials:(t,{payload:{user:n,token:r}})=>{t.user=n,t.token=r},clearUser:t=>{delete t.user,delete t.token}}}),{setCredentials:De,clearUser:He}=Q.actions;var We=Q.reducer;const z=t=>t.auth.user,C=t=>(I(z),t.children),V=()=>ce(),je=le({reducerPath:"auth",baseQuery:de({baseUrl:"/",prepareHeaders:(t,{getState:n})=>{const r=n().auth.token;return r&&t.set("authorization",`Bearer ${r}`),t}}),endpoints:t=>({login:t.mutation({query:n=>({url:"login",method:"POST",body:n})}),logout:t.mutation({query:n=>({url:"logout",method:"POST",body:n})}),protected:t.mutation({query:()=>"protected"})})}),{useLoginMutation:Fe,useLogoutMutation:Ue,useProtectedMutation:$e,reducerPath:dt,reducer:ut,middleware:ht}=je,W={auth:{credentials:{username:"auth",password:"auth"},roles:["auth"],avatar:"/placeholder-member.png"},member:{credentials:{username:"member",password:"member"},roles:["member"],avatar:"/placeholder-member.png"},admin:{credentials:{username:"admin",password:"admin"},roles:["admin"],avatar:"/placeholder-admin.png"}};function _e({name:t,onChange:n,value:r}){const[s,o]=g.exports.useState(!1);return a($,{size:"lg",children:[e(_,{pr:"4.5rem",type:s?"text":"password",placeholder:"Enter password",name:t,value:r,onChange:n}),e(he,{width:"4.5rem",children:e(m,{h:"1.75rem",size:"sm",onClick:()=>o(!s),children:s?"Hide":"Show"})})]})}const Ke=()=>{const t=V(),n=F(),r=ue(),[s,o]=g.exports.useState({username:"",password:""}),[i,{isLoading:l}]=Fe(),te=async()=>{try{await i(s).unwrap().then(d=>{t(De(d)),n("/protected")}).catch(d=>console.error(d))}catch{r({status:"error",title:"Error",description:"Oh no, there was an error!",isClosable:!0})}},A=({target:{name:d,value:ne}})=>o(re=>S(w({},re),{[d]:ne})),[N,it]=g.exports.useState("anon");return g.exports.useEffect(()=>{let d=W[N]||W.auth;o(d.credentials)},[N]),a(h,{children:[e(M,{p:5,children:a(U,{spacing:"5",bg:"gray.500",p:8,borderRadius:12,children:[e($,{size:"lg",children:e(_,{onChange:A,name:"username",type:"text",value:s.username,placeholder:"Username or Email"})}),e(_e,{onChange:A,name:"password",value:s.password}),e(m,{size:"lg",isFullWidth:!0,onClick:te,colorScheme:"gray",isLoading:l,children:"Login"})]})}),!1]})};function x(){const[t,{data:n,error:r,isLoading:s}]=$e();return e(L,{maxW:"5xl",centerContent:!0,children:e(M,{w:"400px",children:a(U,{p:5,children:[e(c,{children:e(m,{onClick:o=>{t(o).then(i=>console.log(i))},isLoading:s,children:"Auth Request"})}),e(c,{children:e(m,{onClick:o=>{t(o).then(i=>console.log(i))},isLoading:s,children:"Role Request"})}),e(c,{children:e(m,{onClick:o=>{t(o).then(i=>console.log(i))},isLoading:s,children:"Admin Request"})}),e(c,{children:n?a(h,{children:["Data: ",JSON.stringify(n)]}):r?a(h,{children:["Error: ",JSON.stringify(r)]}):null})]})})})}const R=s=>{var o=s,{title:t,desc:n}=o,r=D(o,["title","desc"]);return a(c,S(w({p:5,shadow:"md",borderWidth:"1px",flex:"1",borderRadius:"md",bg:"white",_hover:{background:"gray.100",cursor:"pointer"}},r),{children:[e(me,{fontSize:"xl",children:t}),e(O,{mt:4,children:n})]}))},Ge=()=>e(h,{children:a(u,{direction:"column",children:[e(L,{maxW:"5xl",centerContent:!0,minHeight:"20vh",children:e("h1",{children:e(O,{fontSize:"6xl",children:"HOME PAGE "})})}),a(L,{maxW:"5xl",centerContent:!0,children:[e("h2",{children:e(O,{fontSize:"3xl",pt:5,children:"ARRRR! Pirate Lingo"})}),e(M,{bg:"gray.50",p:3,children:a(P,{direction:{base:"column",md:"row"},spacing:4,p:4,divider:e(pe,{borderColor:"gray.200"}),children:[e(R,{title:"Ho-ho-ho! power of horror!",desc:"Damn yer wench, feed the scallywag. The plunder hoists with amnesty, love the brig until it sings."}),e(R,{title:"Booty, death, and endurance.",desc:"The seashell hails with madness, lead the brig until it waves. Riddle, strength, and madness."}),e(R,{title:"Beauty, fight, and adventure.",desc:"Evil halitosis lead to the madness. Shiny, rainy ships swiftly vandalize a gutless, fine cannon."})]})})]})]})});var X="/assets/logo.71f690f6.svg",Y="/assets/hamburger.54150789.svg";const f=t=>{const r=ge().pathname===t.to;return e(fe,{as:K,to:t.to,px:2,py:1,rounded:"md",bg:r?"blue.100":"",_hover:{textDecoration:"none",bg:E("gray.200","gray.700")},children:t.children})},v=()=>e(h,{children:[{label:"Home",path:"/"},{label:"Dashboard",path:"/protected"},{label:"Role",path:"/protected/role"},{label:"Admin",path:"/admin/config"}].map((n,r)=>e(f,{to:n.path,children:n.label},r))}),Z=()=>{const t=V(),n=F(),[r,s]=g.exports.useState({session_id:""}),[o]=Ue();return a(ye,{children:[e(be,{as:m,rounded:"full",variant:"link",cursor:"pointer",minW:0,children:e(ve,{size:"sm",src:"/placeholder-auth.png"})}),a(we,{children:[e(H,{as:K,to:"/protected",children:"Dashboard"}),e(Se,{}),e(H,{onClick:async()=>{try{await o(r).unwrap().then(l=>{t(He()),n("/login")}).catch(l=>console.error(l))}catch{}},children:"Logout"})]})]})};function Je(){const t=I(z),{isOpen:n,onOpen:r,onClose:s}=G();return e(h,{children:a(c,{bg:E("gray.300","gray.900"),px:4,children:[a(u,{h:16,alignItems:"center",justifyContent:"space-between",children:[e(J,{size:"md","aria-label":"Open Menu",display:{md:"none"},onClick:n?s:r,icon:e("img",{src:Y})}),a(b,{spacing:8,alignItems:"center",children:[e(u,{alignItems:"center",children:e(f,{to:"/",children:e("img",{src:X})})}),e(b,{as:"nav",spacing:3,display:{base:"none",md:"flex"},children:e(v,{})})]}),a(u,{alignItems:"center",children:[t&&e(Z,{}),!t&&e(f,{to:"/login",children:"Login"})]})]}),n?e(c,{pb:4,display:{md:"none"},children:e(P,{as:"nav",spacing:4,children:e(v,{})})}):null]})})}function Qe(){const t=I(z),{isOpen:n,onOpen:r,onClose:s}=G();return e(h,{children:a(c,{bg:E("gray.300","gray.900"),px:4,children:[a(u,{h:16,alignItems:"center",justifyContent:"space-between",children:[e(J,{size:"md","aria-label":"Open Menu",display:{md:"none"},onClick:n?s:r,icon:e("img",{src:Y})}),a(b,{spacing:8,alignItems:"center",children:[e(u,{alignItems:"center",children:e(f,{to:"/",children:e("img",{src:X})})}),e(b,{as:"nav",spacing:3,display:{base:"none",md:"flex"},children:e(v,{})})]}),a(u,{alignItems:"center",children:[t&&e(Z,{}),!t&&e(f,{to:"/login",children:"Login"})]})]}),n?e(c,{pb:4,display:{md:"none"},children:e(P,{as:"nav",spacing:4,children:e(v,{})})}):null]})})}function Ve(){return a(u,{direction:"column",minHeight:"100vh",children:[e(Je,{}),e(c,{flex:"1",children:a(ke,{children:[e(p,{path:"/",element:e(Ge,{})}),e(p,{path:"/login",element:e(Ke,{})}),e(p,{path:"/protected",element:e(C,{children:e(x,{})})}),e(p,{path:"/protected/role",element:e(C,{requires:{role:"member"},children:e(x,{})})}),e(p,{path:"/admin/config",element:e(C,{requires:{role:"admin"},children:e(x,{})})})]})}),e(Qe,{})]})}const Xe=Ce({auth:We}),Ye={key:"root",storage:Le},Ze=xe(Ye,Xe),et=t=>Re({reducer:Ze,middleware:n=>n({serializableCheck:!1}),devTools:!1}),ee=et();Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function tt(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()}).catch(t=>{console.error(t.message)})}const j=Oe(),nt=[k.get("/protected",(t,n,r)=>{const s=t.headers.all(),o=sessionStorage.getItem("TOKEN");return console.log(s,o),s.authorization!==`Bearer ${o}`?n(r.json({message:"Please login"}),r.status(401)):n(r.json({message:"Request success!"}))}),k.post("/login",(t,n,r)=>(sessionStorage.setItem("is-authenticated","true"),sessionStorage.setItem("TOKEN",j),n(r.delay(400),r.json({user:{first_name:"Test",last_name:"User"},token:j})))),k.post("/logout",(t,n,r)=>{const s=t.headers.all();return sessionStorage.setItem("TOKEN","NOPE"),console.log(s,t,n),n(r.delay(400),r.json({msg:"success"}))})],rt=Ie(...nt);let st=Me(ee);const ot={brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"}},at=Pe({colors:ot});rt.start({quiet:!0}).then(()=>Ee.render(e(ze.StrictMode,{children:e(Ae,{store:ee,children:e(Ne,{loading:null,persistor:st,children:e(qe,{theme:at,children:e(Be,{children:e(Ve,{})})})})})}),document.getElementById("root")));tt();
